{"version":3,"file":"hue-6cfda4b7-bundle-3c690b33b5f47cc0d68b.js","sources":["webpack:///./desktop/core/src/desktop/js/config/events.ts","webpack:///./desktop/core/src/desktop/js/config/hueConfig.ts","webpack:///./desktop/core/src/desktop/js/config/types.ts","webpack:///./desktop/core/src/desktop/js/doc/docSupport.js"],"sourcesContent":["// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nexport var REFRESH_CONFIG_TOPIC = 'cluster.config.refresh.config';\nexport var CONFIG_REFRESHED_TOPIC = 'cluster.config.set.config';\nexport var GET_KNOWN_CONFIG_TOPIC = 'cluster.config.get.config';","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { post } from 'api/utils';\nimport * as URLS from \"../api/urls\";\nimport { CONFIG_REFRESHED_TOPIC, GET_KNOWN_CONFIG_TOPIC, REFRESH_CONFIG_TOPIC } from \"./events\";\nimport { AppType } from \"./types\";\nimport huePubSub from 'utils/huePubSub';\nvar lastConfigPromise;\nvar lastKnownConfig;\nexport var refreshConfig = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            lastConfigPromise = new Promise( /*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(resolve, reject) {\n                var apiResponse;\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.prev = 0;\n                        _context.next = 3;\n                        return post(URLS.FETCH_CONFIG_API, {}, {\n                          silenceErrors: true\n                        });\n\n                      case 3:\n                        apiResponse = _context.sent;\n\n                        if (apiResponse.status == 0) {\n                          lastKnownConfig = apiResponse;\n                          resolve(lastKnownConfig);\n                        } else {\n                          huePubSub.publish('hue.error', apiResponse.message);\n                          reject();\n                        }\n\n                        _context.next = 10;\n                        break;\n\n                      case 7:\n                        _context.prev = 7;\n                        _context.t0 = _context[\"catch\"](0);\n                        reject(_context.t0);\n\n                      case 10:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee, null, [[0, 7]]);\n              }));\n\n              return function (_x, _x2) {\n                return _ref2.apply(this, arguments);\n              };\n            }());\n            lastConfigPromise.then(function (config) {\n              huePubSub.publish(CONFIG_REFRESHED_TOPIC, config);\n            })[\"catch\"](function () {\n              huePubSub.publish(CONFIG_REFRESHED_TOPIC);\n            });\n            return _context2.abrupt(\"return\", lastConfigPromise);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function refreshConfig() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getLastKnownConfig = function getLastKnownConfig() {\n  return lastKnownConfig;\n};\nexport var getConfig = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", getLastKnownConfig() || refreshConfig());\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function getConfig() {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar getInterpreters = function getInterpreters(appType) {\n  if (!lastKnownConfig || !lastKnownConfig.app_config) {\n    return [];\n  }\n\n  var appConfig = lastKnownConfig.app_config[appType];\n\n  if (!appConfig) {\n    console.warn(\"No app config for type \".concat(appType));\n    return [];\n  }\n\n  if (!appConfig.interpreters) {\n    console.warn(\"No interpreters configured for type \".concat(appType));\n    return [];\n  }\n\n  return appConfig.interpreters;\n};\n\nvar findConnector = function findConnector(appType, connectorTest) {\n  return getInterpreters(appType).find(connectorTest);\n};\n\nvar filterConnector = function filterConnector(appType, connectorTest) {\n  return getInterpreters(appType).filter(connectorTest);\n};\n\nexport var findDashboardConnector = function findDashboardConnector(connectorTest) {\n  return findConnector(AppType.dashboard, connectorTest);\n};\nexport var findBrowserConnector = function findBrowserConnector(connectorTest) {\n  return findConnector(AppType.browser, connectorTest);\n};\nexport var findEditorConnector = function findEditorConnector(connectorTest) {\n  return findConnector(AppType.editor, connectorTest);\n};\nexport var filterBrowserConnectors = function filterBrowserConnectors(connectorTest) {\n  return filterConnector(AppType.browser, connectorTest);\n};\nexport var filterEditorConnectors = function filterEditorConnectors(connectorTest) {\n  return filterConnector(AppType.editor, connectorTest);\n};\nvar rootPathRegex = /.*%3A%2F%2F(.+)$/;\n/**\n * This takes the initial path from the \"browser\" config, used in cases where the users can't access '/'\n * for abfs etc.\n */\n\nexport var getRootFilePath = function getRootFilePath(connector) {\n  if (!connector || connector.type === 'hdfs') {\n    return '';\n  }\n\n  var match = connector.page.match(rootPathRegex);\n\n  if (match) {\n    return match[1] + '/';\n  }\n\n  return '';\n};\nhuePubSub.subscribe(REFRESH_CONFIG_TOPIC, refreshConfig); // TODO: Replace GET_KNOWN_CONFIG_TOPIC pubSub with sync getKnownConfig const\n\nhuePubSub.subscribe(GET_KNOWN_CONFIG_TOPIC, function (callback) {\n  if (lastConfigPromise && callback) {\n    lastConfigPromise.then(callback)[\"catch\"](callback);\n  }\n});\nexport default {\n  refreshConfig: refreshConfig,\n  getInterpreters: getInterpreters,\n  getLastKnownConfig: getLastKnownConfig,\n  getRootFilePath: getRootFilePath,\n  findBrowserConnector: findBrowserConnector,\n  findDashboardConnector: findDashboardConnector,\n  findEditorConnector: findEditorConnector\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nexport var AppType;\n\n(function (AppType) {\n  AppType[\"browser\"] = \"browser\";\n  AppType[\"editor\"] = \"editor\";\n  AppType[\"dashboard\"] = \"dashboard\";\n  AppType[\"scheduler\"] = \"scheduler\";\n  AppType[\"sdkapps\"] = \"sdkapps\";\n})(AppType || (AppType = {}));","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport I18n from \"../utils/i18n\";\nvar DOCUMENT_TYPE_I18n = {\n  all: I18n('All'),\n  directory: I18n('Directory'),\n  'link-pigscript': I18n('Pig Design'),\n  'link-workflow': I18n('Job Design'),\n  notebook: I18n('Notebook'),\n  'oozie-bundle2': I18n('Oozie Bundle'),\n  'oozie-coordinator2': I18n('Oozie Schedule'),\n  'oozie-workflow2': I18n('Oozie Workflow'),\n  'query-hive': window.ENABLE_UNIFIED_ANALYTICS ? I18n('Unified Analytics Query') : I18n('Hive Query'),\n  'query-impala': I18n('Impala Query'),\n  'search-dashboard': I18n('Search Dashboard'),\n  'query-mapreduce': I18n('MapReduce Job'),\n  'query-sqoop1': I18n('Import Job'),\n  'query-spark2': I18n('Spark Job'),\n  'query-java': I18n('Java Job'),\n  'query-pig': I18n('Pig Script'),\n  'query-shell': I18n('Shell Script'),\n  'query-distcp': I18n('DistCp Job')\n};\nvar DOCUMENT_TYPES = [];\nObject.keys(DOCUMENT_TYPE_I18n).forEach(function (key) {\n  if (key !== 'all') {\n    DOCUMENT_TYPES.push({\n      type: key,\n      label: DOCUMENT_TYPE_I18n[key]\n    });\n  }\n});\nDOCUMENT_TYPES.sort(function (a, b) {\n  return a.label.localeCompare(b.label);\n});\nDOCUMENT_TYPES.unshift({\n  type: 'all',\n  label: DOCUMENT_TYPE_I18n['all']\n});\nexport { DOCUMENT_TYPE_I18n, DOCUMENT_TYPES };"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;A;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;A;;;;;;;;;;;;;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;A;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A;;A","sourceRoot":""}