{"version":3,"file":"hue-f8e792d3-bundle-3c690b33b5f47cc0d68b.js","sources":["webpack:///./desktop/core/src/desktop/js/apps/about/components/ko.connectorsConfig.js","webpack:///./desktop/core/src/desktop/js/apps/about/components/ko.hueConfigTree.js"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport * as ko from 'knockout';\nimport { simpleGet, simplePost } from \"../../../api/apiUtils\";\nimport { REFRESH_CONFIG_TOPIC } from 'config/events';\nimport componentUtils from \"../../../ko/components/componentUtils\";\nimport DisposableComponent from \"../../../ko/components/DisposableComponent\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nexport var NAME = 'connectors-config'; // prettier-ignore\n\nvar TEMPLATE = \"\\n<script type=\\\"text/html\\\" id=\\\"installed-connectors-page\\\">\\n  <div class=\\\"row-fluid\\\">\\n    <a href=\\\"javascript:void(0)\\\" data-bind=\\\"click: addNewConnector.bind($data)\\\">\\n      + Connector\\n    </a>\\n  </div>\\n\\n  <div data-bind=\\\"template: { name: 'connectors-page', data: instances() }\\\"></div>\\n\\n</script>\\n\\n\\n<script type=\\\"text/html\\\" id=\\\"add-connector-page\\\">\\n  <div class=\\\"row-fluid\\\">\\n    Add a Connector\\n  </div>\\n\\n  <div data-bind=\\\"template: { name: 'connectors-page', data: connectors() }\\\"></div>\\n</script>\\n\\n\\n<script type=\\\"text/html\\\" id=\\\"connectors-page\\\">\\n  <div style=\\\"margin: 0 10px;\\\">\\n    <div class=\\\"pull-right\\\" style=\\\"display: inline-block\\\">\\n      <div style=\\\"display: inline-block; margin-right: 10px;\\\" data-bind=\\\"component: {\\n          name: 'hue-drop-down',\\n          params: {\\n            fixedPosition: true,\\n            value: $parent.selectedConnectorCategory,\\n            labelAttribute: 'name',\\n            entries: $parent.filterCategories,\\n            linkTitle: '\".concat(I18n('Category'), \"'\\n          }\\n        }\\n      \\\"></div>\\n      <input type=\\\"text\\\" class=\\\"input-large\\\" style=\\\"padding: 3px 4px; border-radius: 2px; margin-top: 8px; margin-right: 10px;\\\" placeholder=\\\"\").concat(I18n('Filter...'), \"\\\" data-bind=\\\"\\n          clearable: $parent.connectorsFilter,\\n          valueUpdate: 'afterkeydown'\\n      \\\">\\n      <span>\\n        <a href=\\\"https://docs.gethue.com/administrator/configuration/connectors/\\\" target=\\\"_blank\\\">\\n          <i class=\\\"fa fa-question-circle\\\"></i> \").concat(I18n('Help'), \"\\n        </a>\\n      </span>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"card card-small margin-top-10\\\">\\n    <div class=\\\"card-body clearfix\\\">\\n\\n      <div class=\\\"span10\\\">\\n        <div class=\\\"margin-top-10\\\">\\n          <div data-bind=\\\"foreach: $parent.filteredConnectors()\\\">\\n            <h4 data-bind=\\\"text: category_name\\\"></h4>\\n            <table class=\\\"table table-condensed\\\">\\n              <thead>\\n                <tr>\\n                  <th width=\\\"30%\\\">\").concat(I18n('Name'), \"</th>\\n                  <th>\").concat(I18n('Description'), \"</th>\\n                </tr>\\n              </thead>\\n              <!-- ko if: $data.values.length > 0 -->\\n              <tbody data-bind=\\\"foreach: values\\\">\\n                <tr data-bind=\\\"click: $parents[2].editConnector.bind($parents[2])\\\">\\n                  <td data-bind=\\\"text: nice_name\\\"></td>\\n                  <td data-bind=\\\"text: description\\\"></td>\\n                </tr>\\n              </tbody>\\n              <!-- /ko -->\\n              <!-- ko ifnot: $data.values.length > 0 -->\\n              <tfoot>\\n                <tr>\\n                  <td colspan=\\\"2\\\">\\n                    \").concat(I18n('No connectors'), \"\\n                    <!-- ko if: $parents[1].section() === 'installed-connectors-page' -->\\n                      <a href=\\\"javascript:void(0)\\\" data-bind=\\\"click: function() { $parents[1].selectedConnectorCategory($data.category); $parents[1].addNewConnector(); }\\\">\\n                        \").concat(I18n('Add one ?'), \"\\n                      </a>\\n                    <!-- /ko -->\\n                  </td>\\n                </tr>\\n              </tfoot>\\n              <!-- /ko -->\\n            </table>\\n          </div>\\n\\n          <!-- ko if: $parent.filteredConnectors().length == 0 -->\\n          <table class=\\\"table table-condensed\\\">\\n            <thead>\\n              <tr>\\n                <th width=\\\"30%\\\">\").concat(I18n('Name'), \"</th>\\n                <th>\").concat(I18n('Instances'), \"</th>\\n              </tr>\\n            </thead>\\n            <tfoot>\\n              <tr>\\n                <td colspan=\\\"2\\\">\\n                  \").concat(I18n('No connectors'), \"\\n                  <!-- ko if: $parent.section() == 'installed-connectors-page' -->\\n                    <a href=\\\"javascript:void(0)\\\" data-bind=\\\"click: function() { $parent.selectedConnectorCategory($data.category); $parent.addNewConnector(); }\\\">\\n                      \").concat(I18n('Add one ?'), \"\\n                    </a>\\n                  <!-- /ko -->\\n                </td>\\n              </tr>\\n            </tfoot>\\n          </table>\\n          <!-- /ko -->\\n        </div>\\n      </div>\\n    </div>\\n\\n  </div>\\n</script>\\n\\n\\n<script type=\\\"text/html\\\" id=\\\"connector-page\\\">\\n  <div class=\\\"row-fluid\\\">\\n    <input data-bind=\\\"value: nice_name\\\">\\n    <!-- ko if: typeof id != 'undefined' -->\\n      <!-- ko if: id -->\\n        (<span data-bind=\\\"text: name\\\"></span>)\\n        <a href=\\\"javascript:void(0)\\\" data-bind=\\\"click: $parent.updateConnector.bind($parent)\\\">\\n          \").concat(I18n('Update'), \"\\n        </a>\\n        <a href=\\\"javascript:void(0)\\\" data-bind=\\\"click: $parent.deleteConnector.bind($parent)\\\">\\n          \").concat(I18n('Delete'), \"\\n        </a>\\n      <!-- /ko -->\\n      <!-- ko ifnot: id -->\\n        <a href=\\\"javascript:void(0)\\\" data-bind=\\\"click: $parent.updateConnector.bind($parent)\\\">\\n          \").concat(I18n('Save'), \"\\n        </a>\\n        <a href=\\\"javascript:void(0)\\\" data-bind=\\\"click: function() { $parent.section('add-connector-page'); }\\\">\\n          \").concat(I18n('Cancel'), \"\\n        </a>\\n      <!-- /ko -->\\n    <!-- /ko -->\\n    <a href=\\\"javascript:void(0)\\\" data-bind=\\\"click: $parent.testConnector.bind($parent)\\\">\\n      \").concat(I18n('Test connection'), \"\\n    </a>\\n    <span>\\n      <i class=\\\"fa fa-spinner fa-spin\\\" data-bind=\\\"visible: $parent.testConnectionExecuting()\\\"></i>\\n      <i class=\\\"fa fa-question\\\" data-bind=\\\"visible: !$parent.testConnectionExecuted() && !$parent.testConnectionExecuting()\\\"></i>\\n      <i class=\\\"fa fa-check\\\" data-bind=\\\"visible: $parent.testConnectionExecuted() && !$parent.testConnectionErrors().length\\\"></i>\\n      <i class=\\\"fa fa-exclamation\\\" data-bind=\\\"visible: $parent.testConnectionExecuted() && $parent.testConnectionErrors().length\\\"></i>\\n      <span data-bind=\\\"visible: $parent.testConnectionExecuted() && $parent.testConnectionErrors().length, text: $parent.testConnectionErrors\\\">\\n      </span>\\n    </span>\\n    <table class=\\\"table table-condensed\\\">\\n      <thead>\\n        <tr>\\n          <th width=\\\"30%\\\">\").concat(I18n('Name'), \"</th>\\n          <th>\").concat(I18n('Value'), \"</th>\\n        </tr>\\n      </thead>\\n      <tbody data-bind=\\\"foreach: settings\\\">\\n        <tr>\\n          <td data-bind=\\\"text: name\\\"></td>\\n          <td><input data-bind=\\\"value: value\\\" class=\\\"input-xxlarge\\\"></td>\\n        </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n</script>\\n\\n<div class=\\\"container-fluid\\\">\\n  <a href=\\\"javascript:void(0)\\\" data-bind=\\\"click: function() { section('installed-connectors-page'); }\\\">\\n    \").concat(I18n('Connectors'), \"\\n  </a>\\n\\n  <!-- ko if: section() === 'installed-connectors-page' -->\\n    <div data-bind=\\\"template: { name: 'installed-connectors-page' }\\\"></div>\\n  <!-- /ko -->\\n\\n  <!-- ko if: section() === 'add-connector-page' -->\\n    <div data-bind=\\\"template: { name: 'add-connector-page' }\\\"></div>\\n  <!-- /ko -->\\n\\n  <!-- ko if: section() === 'connector-page' && instance() -->\\n    <div data-bind=\\\"template: { name: 'connector-page', data: instance() }\\\"></div>\\n  <!-- /ko -->\\n</div>\\n\");\nvar ALL_CATEGORY = {\n  type: 'all',\n  name: I18n('All')\n};\n\nvar ConnectorsConfig = /*#__PURE__*/function (_DisposableComponent) {\n  _inherits(ConnectorsConfig, _DisposableComponent);\n\n  var _super = _createSuper(ConnectorsConfig);\n\n  function ConnectorsConfig() {\n    var _this;\n\n    _classCallCheck(this, ConnectorsConfig);\n\n    _this = _super.call(this);\n    _this.section = ko.observable('installed-connectors-page');\n\n    _this.section.subscribe(function () {\n      _this.connectorsFilter('');\n\n      _this.testConnectionExecuted(false);\n    });\n\n    _this.categories = ko.observableArray();\n    _this.filterCategories = ko.pureComputed(function () {\n      return [ALL_CATEGORY].concat(_this.categories());\n    });\n    _this.selectedConnectorCategory = ko.observable(ALL_CATEGORY);\n    _this.connectorsFilter = ko.observable();\n    _this.testConnectionExecuted = ko.observable(false);\n    _this.testConnectionExecuting = ko.observable(false);\n    _this.testConnectionErrors = ko.observable(''); // Handle two types of objects are being listed: connector instances and types\n\n    _this.instances = ko.observableArray(); // Connector instances (e.g. connector to a MySql DB on a certain host)\n\n    _this.instance = ko.observable();\n    _this.connectors = ko.observableArray(); // Connector types (e.g. mysql dialect)\n\n    _this.connector = ko.observable();\n    _this.selectedConnectors = ko.pureComputed(function () {\n      var connectors = _this.section() === 'installed-connectors-page' ? _this.instances() : _this.connectors();\n\n      if (_this.selectedConnectorCategory() === ALL_CATEGORY) {\n        return connectors;\n      }\n\n      return connectors.filter(function (connector) {\n        return connector.category === _this.selectedConnectorCategory().type;\n      });\n    });\n    _this.filteredConnectors = ko.pureComputed(function () {\n      if (!_this.connectorsFilter()) {\n        return _this.selectedConnectors();\n      }\n\n      var lowerQuery = _this.connectorsFilter().toLowerCase();\n\n      var filteredConnectors = [];\n\n      var categoryIndex = _this.categories().reduce(function (index, category) {\n        index[category.type] = category.category_name;\n        return index;\n      }, {});\n\n      _this.selectedConnectors().forEach(function (connector) {\n        var filteredConnector = {\n          category: connector.category,\n          category_name: categoryIndex[connector.category],\n          values: connector.values.filter(function (val) {\n            return val.nice_name.toLowerCase().indexOf(lowerQuery) !== -1;\n          })\n        };\n\n        if (filteredConnector.values.length > 0) {\n          filteredConnectors.push(filteredConnector);\n        }\n      });\n\n      return filteredConnectors;\n    });\n\n    _this.fetchConnectors();\n\n    return _this;\n  }\n\n  _createClass(ConnectorsConfig, [{\n    key: \"addNewConnector\",\n    value: function addNewConnector() {\n      this.section('add-connector-page');\n    }\n  }, {\n    key: \"fetchConnectors\",\n    value: function fetchConnectors() {\n      var _this2 = this;\n\n      this.fetchConnectorTypes(); // TODO: might be cleaner to chain below\n\n      simpleGet('/desktop/connectors/api/instances/', {}, {\n        successCallback: function successCallback(data) {\n          _this2.instances(data.connectors);\n        }\n      });\n    }\n  }, {\n    key: \"editConnector\",\n    value: function editConnector(data) {\n      if (this.section() === 'installed-connectors-page') {\n        this.instance(data);\n      } else {\n        this.newConnector(data.dialect, data[\"interface\"]);\n      }\n\n      this.section('connector-page');\n    }\n  }, {\n    key: \"newConnector\",\n    value: function newConnector(dialect, con_interface) {\n      var _this3 = this;\n\n      simpleGet('/desktop/connectors/api/instance/new/' + dialect + '/' + con_interface, {}, {\n        successCallback: function successCallback(data) {\n          _this3.instance(ko.mapping.fromJS(data.connector));\n        }\n      });\n    }\n  }, {\n    key: \"fetchConnector\",\n    value: function fetchConnector(id) {\n      var _this4 = this;\n\n      simpleGet('/desktop/connectors/api/instance/get/' + id, {}, {\n        successCallback: function successCallback(data) {\n          _this4.instance(ko.mapping.fromJS(data.connector));\n        }\n      });\n    }\n  }, {\n    key: \"deleteConnector\",\n    value: function deleteConnector(connector) {\n      var _this5 = this;\n\n      simplePost('/desktop/connectors/api/instance/delete', {\n        connector: ko.mapping.toJSON(connector)\n      }, {\n        successCallback: function successCallback(data) {\n          _this5.section('installed-connectors-page');\n\n          _this5.fetchConnectors();\n\n          huePubSub.publish(REFRESH_CONFIG_TOPIC);\n        }\n      });\n    }\n  }, {\n    key: \"updateConnector\",\n    value: function updateConnector(connector) {\n      var _this6 = this;\n\n      simplePost('/desktop/connectors/api/instance/update', {\n        connector: ko.mapping.toJSON(connector)\n      }, {\n        successCallback: function successCallback(data) {\n          connector.id = data.connector.id;\n\n          _this6.section('installed-connectors-page');\n\n          _this6.fetchConnectors();\n\n          huePubSub.publish(REFRESH_CONFIG_TOPIC);\n        }\n      });\n    }\n  }, {\n    key: \"fetchConnectorTypes\",\n    value: function fetchConnectorTypes() {\n      var _this7 = this;\n\n      simpleGet('/desktop/connectors/api/types/', {}, {\n        successCallback: function successCallback(data) {\n          _this7.connectors(data.connectors);\n\n          _this7.categories(data.categories);\n        }\n      });\n    }\n  }, {\n    key: \"testConnector\",\n    value: function testConnector(connector) {\n      var _this8 = this;\n\n      this.testConnectionExecuted(false);\n      this.testConnectionExecuting(true);\n      this.testConnectionErrors('');\n      simplePost('/desktop/connectors/api/instance/test', {\n        connector: ko.mapping.toJSON(connector)\n      }, {\n        successCallback: function successCallback(data) {\n          _this8.testConnectionExecuted(true);\n\n          _this8.testConnectionExecuting(false);\n\n          _this8.testConnectionErrors(data.warnings);\n        }\n      });\n    }\n  }]);\n\n  return ConnectorsConfig;\n}(DisposableComponent);\n\ncomponentUtils.registerComponent(NAME, ConnectorsConfig, TEMPLATE);","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport * as ko from 'knockout';\nimport apiHelper from \"../../../api/apiHelper\";\nimport componentUtils from \"../../../ko/components/componentUtils\";\nimport I18n from \"../../../utils/i18n\";\nimport DisposableComponent from \"../../../ko/components/DisposableComponent\";\nexport var NAME = 'hue-config-tree'; // prettier-ignore\n\nvar TEMPLATE = \"\\n<script id=\\\"config-values-template\\\" type=\\\"text/html\\\">\\n  <tr>\\n    <th>\\n    <!-- ko if: config.is_anonymous -->\\n      <i>(\".concat(I18n('default section'), \")</i>\\n    <!-- /ko -->\\n    <!-- ko ifnot: config.is_anonymous -->\\n      <span data-bind=\\\"text: config.key\\\"></span>\\n    <!-- /ko -->\\n    </th>\\n    <td data-bind=\\\"css: { 'border-top': depth === 1 ? '0' : null }\\\">\\n      <!-- ko if: typeof config.values !== 'undefined' -->\\n        <!-- ko if: config.help || !config.values.length -->\\n        <i data-bind=\\\"text: config.help || '\").concat(I18n('No help available.'), \"'\\\"></i>\\n        <!-- /ko -->\\n        <table class=\\\"table table-condensed recurse\\\">\\n          <tbody>\\n            <!-- ko foreach: config.values -->\\n              <!-- ko template: { name: 'config-values-template', data: { config: $data, depth: $parent.depth + 1 } } --><!-- /ko -->\\n            <!-- /ko -->\\n          </tbody>\\n        </table>\\n        <!-- /ko -->\\n      <!-- ko if: typeof config.value !== 'undefined' -->\\n        <code data-bind=\\\"text: config.value\\\"></code><br/>\\n        <i data-bind=\\\"text: config.help || '\").concat(I18n('No help available.'), \"'\\\"></i>\\n        <span class=\\\"muted\\\">\").concat(I18n('Default:'), \" <i data-bind=\\\"text: config.default\\\"></i></span>\\n      <!-- /ko -->\\n    </td>\\n  </tr>\\n</script>\\n\\n<div class=\\\"container-fluid\\\">\\n  <!-- ko hueSpinner: { spin:  loading, center: true, size: 'large' } --><!-- /ko -->\\n  <!-- ko ifnot: loading -->\\n    <!-- ko if: errorMessage -->\\n      <div class=\\\"alert alert-error\\\" style=\\\"margin: 20px\\\" data-bind=\\\"text: errorMessage\\\"></div>\\n    <!-- /ko -->\\n    <!-- ko ifnot: errorMessage -->\\n      <div class=\\\"row-fluid\\\">\\n        <div class=\\\"card card-home\\\">\\n          <div class=\\\"pull-right muted margin-top-30\\\">\\n            \").concat(I18n('Configuration files located in'), \" <code style=\\\"color: #0B7FAD\\\" data-bind=\\\"text: configDir\\\"></code>\\n          </div>\\n          <h1 class=\\\"inline-block margin-top-20\\\">\\n            \").concat(I18n('Sections'), \"\\n          </h1>\\n          <form class=\\\"form-inline\\\" autocomplete=\\\"off\\\">\\n            <input class=\\\"inline-autocomp-input\\\" type=\\\"text\\\" \").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, \" placeholder=\\\"\").concat(I18n('Filter...'), \"\\\" data-bind=\\\"textInput: filter, clearable: { value: filter }\\\">\\n          </form>\\n          <div class=\\\"card-body clearfix\\\">\\n            <div class=\\\"span2\\\">\\n              <ul class=\\\"nav nav-pills nav-stacked\\\" data-bind=\\\"foreach: filteredSections\\\">\\n                <li data-bind=\\\"\\n                    css: { 'active': $data.key === $parent.selectedKey() },\\n                    click: function () { $parent.selectedKey($data.key) }\\n                  \\\">\\n                  <a href=\\\"javascript: void(0);\\\" data-bind=\\\"text: key\\\"></a>\\n                </li>\\n              </ul>\\n            </div>\\n            <div class=\\\"span10\\\" data-bind=\\\"with: selectedConfig\\\">\\n              <div class=\\\"tab-content\\\">\\n                <div class=\\\"tab-pane active\\\">\\n                  <!-- ko if: values.length -->\\n                  <table class=\\\"table table-condensed recurse\\\">\\n                    <tbody data-bind=\\\"foreach: values\\\">\\n                      <!-- ko template: { name: 'config-values-template', data: { config: $data, depth: 1 } } --><!-- /ko -->\\n                    </tbody>\\n                  </table>\\n                  <!-- /ko -->\\n                  <!-- ko ifnot: values.length -->\\n                    <i>\").concat(I18n('Empty configuration section'), \"</i>\\n                  <!-- /ko -->\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"card card-home\\\" style=\\\"margin-top: 50px\\\">\\n          <h2 class=\\\"card-heading simple\\\">\").concat(I18n('Installed Applications'), \"</h2>\\n          <div class=\\\"card-body\\\" data-bind=\\\"foreach: apps\\\">\\n            <!-- ko if: has_ui -->\\n              <a href=\\\"javascript: void(0);\\\" data-bind=\\\"hueLink: display_name\\\"><span class=\\\"badge badge-info\\\" data-bind=\\\"text: name\\\"></span></a>\\n            <!-- /ko -->\\n            <!-- ko ifnot: has_ui -->\\n              <span class=\\\"badge\\\" title=\\\"\").concat(I18n('This app does not have a UI'), \"\\\" data-bind=\\\"text: name\\\"></span>\\n            <!-- /ko -->\\n          </div>\\n        </div>\\n      </div>\\n    <!-- /ko -->\\n  <!-- /ko -->\\n</div>\\n\");\n\nvar filterConfig = function filterConfig(config, lowerCaseFilter) {\n  if (config.value && config.value.indexOf(lowerCaseFilter) !== -1 || !config.is_anonymous && config.key.indexOf(lowerCaseFilter) !== -1) {\n    return config;\n  }\n\n  if (config.values) {\n    var values = [];\n    config.values.forEach(function (val) {\n      var filtered = filterConfig(val, lowerCaseFilter);\n\n      if (filtered) {\n        values.push(filtered);\n      }\n    });\n\n    if (values.length) {\n      return {\n        key: config.key,\n        is_anonymous: config.is_anonymous,\n        help: config.help,\n        values: values\n      };\n    }\n  }\n};\n\nvar HueConfigTree = /*#__PURE__*/function (_DisposableComponent) {\n  _inherits(HueConfigTree, _DisposableComponent);\n\n  var _super = _createSuper(HueConfigTree);\n\n  function HueConfigTree(params) {\n    var _this;\n\n    _classCallCheck(this, HueConfigTree);\n\n    _this = _super.call(this);\n    _this.loading = ko.observable(true);\n    _this.filter = ko.observable().extend({\n      throttle: 500\n    });\n    _this.errorMessage = ko.observable();\n    _this.apps = ko.observableArray();\n    _this.config = ko.observableArray();\n    _this.configDir = ko.observable();\n    _this.selectedKey = ko.observable();\n    _this.filteredSections = ko.pureComputed(function () {\n      if (!_this.filter()) {\n        return _this.config();\n      }\n\n      var lowerCaseFilter = _this.filter().toLowerCase();\n\n      var foundConfigs = [];\n      var selectedFound = false;\n\n      _this.config().forEach(function (config) {\n        var filtered = filterConfig(config, lowerCaseFilter);\n\n        if (filtered) {\n          foundConfigs.push(filtered);\n\n          if (_this.selectedKey() && _this.selectedKey() === filtered.key) {\n            selectedFound = true;\n          }\n        }\n      });\n\n      if (!selectedFound) {\n        if (foundConfigs.length) {\n          _this.selectedKey(foundConfigs[0].key);\n        } else {\n          _this.selectedKey(undefined);\n        }\n      }\n\n      return foundConfigs;\n    });\n    _this.selectedConfig = ko.pureComputed(function () {\n      return _this.filteredSections().find(function (section) {\n        return section.key === _this.selectedKey();\n      });\n    });\n\n    _this.load();\n\n    return _this;\n  }\n\n  _createClass(HueConfigTree, [{\n    key: \"load\",\n    value: function () {\n      var _load = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var response;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.loading(true);\n                this.errorMessage(undefined);\n                _context.prev = 2;\n                _context.next = 5;\n                return apiHelper.fetchHueConfigAsync();\n\n              case 5:\n                response = _context.sent;\n                this.config(response.config);\n                this.configDir(response.conf_dir);\n                this.apps(response.apps);\n                this.selectedKey(this.config().length ? this.config()[0].key : undefined);\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](2);\n                this.errorMessage(_context.t0);\n\n              case 15:\n                this.loading(false);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 12]]);\n      }));\n\n      function load() {\n        return _load.apply(this, arguments);\n      }\n\n      return load;\n    }()\n  }]);\n\n  return HueConfigTree;\n}(DisposableComponent);\n\ncomponentUtils.registerComponent(NAME, HueConfigTree, TEMPLATE);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;A;;;;;;;;;;;;;;;;;;;ACnQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;A;;A","sourceRoot":""}